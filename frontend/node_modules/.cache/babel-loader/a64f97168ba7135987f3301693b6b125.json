{"remainingRequest":"/home/kristof/Development/tmp/simpleChatApplication/frontend/node_modules/babel-loader/lib/index.js!/home/kristof/Development/tmp/simpleChatApplication/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/kristof/Development/tmp/simpleChatApplication/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kristof/Development/tmp/simpleChatApplication/frontend/src/components/chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kristof/Development/tmp/simpleChatApplication/frontend/src/components/chat.vue","mtime":1619096969600},{"path":"/home/kristof/Development/tmp/simpleChatApplication/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kristof/Development/tmp/simpleChatApplication/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/kristof/Development/tmp/simpleChatApplication/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kristof/Development/tmp/simpleChatApplication/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB1c2VybmFtZTogU3RyaW5nCiAgfSwKICBkYXRhOiAoKSA9PiAoewogICAgdmFsdWU6ICJyZWNlbnQiLAogICAgc2hvdzogZmFsc2UsCiAgICBtZXNzYWdlOiAiSGV5ISIsCiAgICBtZXNzYWdlczogW10sCiAgICBtYXJrZXI6IHRydWUsCiAgICBpY29uSW5kZXg6IDAsCiAgICB0aW1lcjogbnVsbCwKICAgIGljb25zOiBbIm1kaS1lbW90aWNvbiIsICJtZGktZW1vdGljb24tY29vbCIsICJtZGktZW1vdGljb24tZGVhZCIsICJtZGktZW1vdGljb24tZXhjaXRlZCIsICJtZGktZW1vdGljb24taGFwcHkiLCAibWRpLWVtb3RpY29uLW5ldXRyYWwiLCAibWRpLWVtb3RpY29uLXNhZCIsICJtZGktZW1vdGljb24tdG9uZ3VlIl0KICB9KSwKICBjb21wdXRlZDogewogICAgaWNvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaWNvbnNbdGhpcy5pY29uSW5kZXhdOwogICAgfSwKCiAgICBvcmRlcmVkTWVzc2FnZXMoKSB7CiAgICAgIGxldCB0bXBNZXNzYWdlcyA9IE9iamVjdC5hc3NpZ24oW10sIHRoaXMubWVzc2FnZXMpOwoKICAgICAgaWYgKHRtcE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRtcE1lc3NhZ2VzLnNvcnQoKGEsIGIpID0+IGEudGltZXN0YW1wID4gYi50aW1lc3RhbXAgPyAxIDogLTEpOwogICAgfQoKICB9LAoKICBhc3luYyBtb3VudGVkKCkgewogICAgYXdhaXQgdGhpcy5pbml0KCk7CiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5pbml0KCksIDEwMDApOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGluaXQoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5tZXNzYWdlcyA9IChhd2FpdCBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCIsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgICAgfQogICAgICAgIH0pKS5kYXRhOwogICAgICAgIHRoaXMuJHZ1ZXRpZnkuZ29Ubyhkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCk7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5tZXNzYWdlcyk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0KICAgIH0sCgogICAgdG9nZ2xlTWFya2VyKCkgewogICAgICB0aGlzLm1hcmtlciA9ICF0aGlzLm1hcmtlcjsKICAgIH0sCgogICAgYXN5bmMgc2VuZE1lc3NhZ2UoKSB7CiAgICAgIHRoaXMucmVzZXRJY29uKCk7CiAgICAgIGF3YWl0IGF4aW9zLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCIsIHsKICAgICAgICB1c2VybmFtZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIiksCiAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlCiAgICAgIH0sIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5pbml0KCk7CiAgICAgIHRoaXMuY2xlYXJNZXNzYWdlKCk7CiAgICB9LAoKICAgIGNsZWFyTWVzc2FnZSgpIHsKICAgICAgdGhpcy5tZXNzYWdlID0gIiI7CiAgICB9LAoKICAgIHJlc2V0SWNvbigpIHsKICAgICAgdGhpcy5pY29uSW5kZXggPSAwOwogICAgfSwKCiAgICBjaGFuZ2VJY29uKCkgewogICAgICB0aGlzLmljb25JbmRleCA9PT0gdGhpcy5pY29ucy5sZW5ndGggLSAxID8gdGhpcy5pY29uSW5kZXggPSAwIDogdGhpcy5pY29uSW5kZXgrKzsKICAgIH0KCiAgfSwKCiAgZGVzdHJveWVkKCkgewogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICB9Cgp9Ow=="},{"version":3,"sources":["chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,OAAA,KAAA,MAAA,OAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AAAA,IAAA,QAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAAA,EAAA,OAAA;AACA,IAAA,KAAA,EAAA,QADA;AAEA,IAAA,IAAA,EAAA,KAFA;AAGA,IAAA,OAAA,EAAA,MAHA;AAIA,IAAA,QAAA,EAAA,EAJA;AAKA,IAAA,MAAA,EAAA,IALA;AAMA,IAAA,SAAA,EAAA,CANA;AAOA,IAAA,KAAA,EAAA,IAPA;AAQA,IAAA,KAAA,EAAA,CACA,cADA,EAEA,mBAFA,EAGA,mBAHA,EAIA,sBAJA,EAKA,oBALA,EAMA,sBANA,EAOA,kBAPA,EAQA,qBARA;AARA,GAAA,CAFA;AAsBA,EAAA,QAAA,EAAA;AACA,IAAA,IAAA,GAAA;AACA,aAAA,KAAA,KAAA,CAAA,KAAA,SAAA,CAAA;AACA,KAHA;;AAIA,IAAA,eAAA,GAAA;AACA,UAAA,WAAA,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,KAAA,QAAA,CAAA;;AACA,UAAA,WAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,eAAA,EAAA;AACA;;AACA,aAAA,WAAA,CAAA,IAAA,CAAA,CAAA,CAAA,EAAA,CAAA,KAAA,CAAA,CAAA,SAAA,GAAA,CAAA,CAAA,SAAA,GAAA,CAAA,GAAA,CAAA,CAAA,CAAA;AACA;;AAVA,GAtBA;;AAkCA,QAAA,OAAA,GAAA;AACA,UAAA,KAAA,IAAA,EAAA;AACA,SAAA,KAAA,GAAA,WAAA,CAAA,YAAA,MAAA,KAAA,IAAA,EAAA,EAAA,IAAA,CAAA;AACA,GArCA;;AAuCA,EAAA,OAAA,EAAA;AACA,UAAA,IAAA,GAAA;AACA,UAAA;AACA,aAAA,QAAA,GAAA,CACA,MAAA,KAAA,CAAA,GAAA,CAAA,uBAAA,EAAA;AACA,UAAA,OAAA,EAAA;AACA,4BAAA;AADA;AADA,SAAA,CADA,EAMA,IANA;AAOA,aAAA,QAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA,YAAA;AAEA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA;AACA,OAXA,CAWA,OAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA;AACA,KAhBA;;AAiBA,IAAA,YAAA,GAAA;AACA,WAAA,MAAA,GAAA,CAAA,KAAA,MAAA;AACA,KAnBA;;AAoBA,UAAA,WAAA,GAAA;AACA,WAAA,SAAA;AACA,YAAA,KAAA,CAAA,IAAA,CACA,uBADA,EAEA;AACA,QAAA,QAAA,EAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CADA;AAEA,QAAA,OAAA,EAAA,KAAA;AAFA,OAFA,EAMA;AACA,QAAA,OAAA,EAAA;AACA,0BAAA;AADA;AADA,OANA,CAAA;AAYA,WAAA,IAAA;AACA,WAAA,YAAA;AACA,KApCA;;AAqCA,IAAA,YAAA,GAAA;AACA,WAAA,OAAA,GAAA,EAAA;AACA,KAvCA;;AAwCA,IAAA,SAAA,GAAA;AACA,WAAA,SAAA,GAAA,CAAA;AACA,KA1CA;;AA2CA,IAAA,UAAA,GAAA;AACA,WAAA,SAAA,KAAA,KAAA,KAAA,CAAA,MAAA,GAAA,CAAA,GACA,KAAA,SAAA,GAAA,CADA,GAEA,KAAA,SAAA,EAFA;AAGA;;AA/CA,GAvCA;;AAwFA,EAAA,SAAA,GAAA;AACA,IAAA,aAAA,CAAA,KAAA,KAAA,CAAA;AACA;;AA1FA,CAAA","sourcesContent":["<template>\n  <div>\n    <v-content>\n      <v-row class=\"mb-3\">\n        <v-spacer></v-spacer>\n        <v-card width=\"600\">\n          <div v-for=\"message of orderedMessages\" v-bind:key=\"message.timestamp\">\n            <v-row>\n              <v-spacer v-if=\"username === message.username\"></v-spacer>\n              <v-card class=\"my-3 pa-1 mx-7\" outlined>\n                <p class=\"caption\" v-if=\"username === message.username\">You</p>\n                <p class=\"caption\" v-else>{{message.username}}</p>\n                {{message.message}}\n              </v-card>\n            </v-row>\n          </div>\n        </v-card>\n        <v-spacer></v-spacer>\n      </v-row>\n    </v-content>\n    <v-bottom-navigation v-model=\"value\" fixed app>\n      <v-text-field\n        v-model=\"message\"\n        :append-outer-icon=\"'mdi-send'\"\n        :prepend-icon=\"icon\"\n        filled\n        clear-icon=\"mdi-close-circle\"\n        clearable\n        label=\"Message\"\n        type=\"text\"\n        @click:append=\"toggleMarker\"\n        @click:append-outer=\"sendMessage\"\n        @click:prepend=\"changeIcon\"\n        @click:clear=\"clearMessage\"\n        @keyup.enter.native=\"sendMessage\"\n      ></v-text-field>\n    </v-bottom-navigation>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  props: { username: String },\n  data: () => ({\n    value: \"recent\",\n    show: false,\n    message: \"Hey!\",\n    messages: [],\n    marker: true,\n    iconIndex: 0,\n    timer: null,\n    icons: [\n      \"mdi-emoticon\",\n      \"mdi-emoticon-cool\",\n      \"mdi-emoticon-dead\",\n      \"mdi-emoticon-excited\",\n      \"mdi-emoticon-happy\",\n      \"mdi-emoticon-neutral\",\n      \"mdi-emoticon-sad\",\n      \"mdi-emoticon-tongue\"\n    ]\n  }),\n\n  computed: {\n    icon() {\n      return this.icons[this.iconIndex];\n    },\n    orderedMessages() {\n      let tmpMessages = Object.assign([], this.messages);\n      if (tmpMessages.length === 0) {\n        return [];\n      }\n      return tmpMessages.sort((a, b) => (a.timestamp > b.timestamp ? 1 : -1));\n    }\n  },\n  async mounted() {\n    await this.init();\n    this.timer = setInterval(async () => await this.init(), 1000);\n  },\n\n  methods: {\n    async init() {\n      try {\n        this.messages = (\n          await axios.get(\"http://localhost:3000\", {\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          })\n        ).data;\n        this.$vuetify.goTo(document.body.scrollHeight);\n\n        console.log(this.messages);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    toggleMarker() {\n      this.marker = !this.marker;\n    },\n    async sendMessage() {\n      this.resetIcon();\n      await axios.post(\n        \"http://localhost:3000\",\n        {\n          username: localStorage.getItem(\"username\"),\n          message: this.message\n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      );\n      this.init();\n      this.clearMessage();\n    },\n    clearMessage() {\n      this.message = \"\";\n    },\n    resetIcon() {\n      this.iconIndex = 0;\n    },\n    changeIcon() {\n      this.iconIndex === this.icons.length - 1\n        ? (this.iconIndex = 0)\n        : this.iconIndex++;\n    }\n  },\n  destroyed() {\n    clearInterval(this.timer);\n  }\n};\n</script>\n<style scoped>\n</style>\n"],"sourceRoot":"src/components"}]}