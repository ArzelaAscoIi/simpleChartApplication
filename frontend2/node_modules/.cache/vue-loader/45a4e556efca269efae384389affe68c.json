{"remainingRequest":"/home/kristof/Development/simpleChartApplication/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kristof/Development/simpleChartApplication/frontend/src/components/chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kristof/Development/simpleChartApplication/frontend/src/components/chat.vue","mtime":1608633912780},{"path":"/home/kristof/Development/simpleChartApplication/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kristof/Development/simpleChartApplication/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/kristof/Development/simpleChartApplication/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kristof/Development/simpleChartApplication/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogeyB1c2VybmFtZTogU3RyaW5nIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIHZhbHVlOiAicmVjZW50IiwKICAgIHNob3c6IGZhbHNlLAogICAgbWVzc2FnZTogIkhleSEiLAogICAgbWVzc2FnZXM6IFtdLAogICAgbWFya2VyOiB0cnVlLAogICAgaWNvbkluZGV4OiAwLAogICAgaWNvbnM6IFsKICAgICAgIm1kaS1lbW90aWNvbiIsCiAgICAgICJtZGktZW1vdGljb24tY29vbCIsCiAgICAgICJtZGktZW1vdGljb24tZGVhZCIsCiAgICAgICJtZGktZW1vdGljb24tZXhjaXRlZCIsCiAgICAgICJtZGktZW1vdGljb24taGFwcHkiLAogICAgICAibWRpLWVtb3RpY29uLW5ldXRyYWwiLAogICAgICAibWRpLWVtb3RpY29uLXNhZCIsCiAgICAgICJtZGktZW1vdGljb24tdG9uZ3VlIgogICAgXQogIH0pLAoKICBjb21wdXRlZDogewogICAgaWNvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaWNvbnNbdGhpcy5pY29uSW5kZXhdOwogICAgfSwKICAgIG9yZGVyZWRNZXNzYWdlcygpIHsKICAgICAgbGV0IHRtcE1lc3NhZ2VzID0gT2JqZWN0LmFzc2lnbihbXSwgdGhpcy5tZXNzYWdlcyk7CiAgICAgIGlmICh0bXBNZXNzYWdlcy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgICAgcmV0dXJuIHRtcE1lc3NhZ2VzLnNvcnQoKGEsIGIpID0+IChhLnRpbWVzdGFtcCA+IGIudGltZXN0YW1wID8gMSA6IC0xKSk7CiAgICB9CiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgYXdhaXQgdGhpcy5pbml0KCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgaW5pdCgpIHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLm1lc3NhZ2VzID0gKAogICAgICAgICAgYXdhaXQgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgKS5kYXRhOwogICAgICAgIHRoaXMuJHZ1ZXRpZnkuZ29Ubyhkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCk7CgogICAgICAgIGNvbnNvbGUubG9nKHRoaXMubWVzc2FnZXMpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlTWFya2VyKCkgewogICAgICB0aGlzLm1hcmtlciA9ICF0aGlzLm1hcmtlcjsKICAgIH0sCiAgICBhc3luYyBzZW5kTWVzc2FnZSgpIHsKICAgICAgdGhpcy5yZXNldEljb24oKTsKICAgICAgYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDozMDAwIiwKICAgICAgICB7CiAgICAgICAgICB1c2VybmFtZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIiksCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgKTsKICAgICAgdGhpcy5pbml0KCk7CiAgICAgIHRoaXMuY2xlYXJNZXNzYWdlKCk7CiAgICB9LAogICAgY2xlYXJNZXNzYWdlKCkgewogICAgICB0aGlzLm1lc3NhZ2UgPSAiIjsKICAgIH0sCiAgICByZXNldEljb24oKSB7CiAgICAgIHRoaXMuaWNvbkluZGV4ID0gMDsKICAgIH0sCiAgICBjaGFuZ2VJY29uKCkgewogICAgICB0aGlzLmljb25JbmRleCA9PT0gdGhpcy5pY29ucy5sZW5ndGggLSAxCiAgICAgICAgPyAodGhpcy5pY29uSW5kZXggPSAwKQogICAgICAgIDogdGhpcy5pY29uSW5kZXgrKzsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chat.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <v-content>\n      <v-row class=\"mb-3\">\n        <v-spacer></v-spacer>\n        <v-card width=\"600\">\n          <div v-for=\"message of orderedMessages\" v-bind:key=\"message.timestamp\">\n            <v-row>\n              <v-spacer v-if=\"username === message.username\"></v-spacer>\n              <v-card class=\"my-3 pa-1 mx-7\" outlined>\n                <p class=\"caption\" v-if=\"username === message.username\">You</p>\n                <p class=\"caption\" v-else>{{message.username}}</p>\n                {{message.message}}\n              </v-card>\n            </v-row>\n          </div>\n        </v-card>\n        <v-spacer></v-spacer>\n      </v-row>\n    </v-content>\n    <v-bottom-navigation v-model=\"value\" fixed app>\n      <v-text-field\n        v-model=\"message\"\n        :append-outer-icon=\"'mdi-send'\"\n        :prepend-icon=\"icon\"\n        filled\n        clear-icon=\"mdi-close-circle\"\n        clearable\n        label=\"Message\"\n        type=\"text\"\n        @click:append=\"toggleMarker\"\n        @click:append-outer=\"sendMessage\"\n        @click:prepend=\"changeIcon\"\n        @click:clear=\"clearMessage\"\n        @keyup.enter.native=\"sendMessage\"\n      ></v-text-field>\n    </v-bottom-navigation>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  props: { username: String },\n  data: () => ({\n    value: \"recent\",\n    show: false,\n    message: \"Hey!\",\n    messages: [],\n    marker: true,\n    iconIndex: 0,\n    icons: [\n      \"mdi-emoticon\",\n      \"mdi-emoticon-cool\",\n      \"mdi-emoticon-dead\",\n      \"mdi-emoticon-excited\",\n      \"mdi-emoticon-happy\",\n      \"mdi-emoticon-neutral\",\n      \"mdi-emoticon-sad\",\n      \"mdi-emoticon-tongue\"\n    ]\n  }),\n\n  computed: {\n    icon() {\n      return this.icons[this.iconIndex];\n    },\n    orderedMessages() {\n      let tmpMessages = Object.assign([], this.messages);\n      if (tmpMessages.length === 0) {\n        return [];\n      }\n      return tmpMessages.sort((a, b) => (a.timestamp > b.timestamp ? 1 : -1));\n    }\n  },\n  async mounted() {\n    await this.init();\n  },\n\n  methods: {\n    async init() {\n      try {\n        this.messages = (\n          await axios.get(\"http://localhost:3000\", {\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          })\n        ).data;\n        this.$vuetify.goTo(document.body.scrollHeight);\n\n        console.log(this.messages);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    toggleMarker() {\n      this.marker = !this.marker;\n    },\n    async sendMessage() {\n      this.resetIcon();\n      await axios.post(\n        \"http://localhost:3000\",\n        {\n          username: localStorage.getItem(\"username\"),\n          message: this.message\n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      );\n      this.init();\n      this.clearMessage();\n    },\n    clearMessage() {\n      this.message = \"\";\n    },\n    resetIcon() {\n      this.iconIndex = 0;\n    },\n    changeIcon() {\n      this.iconIndex === this.icons.length - 1\n        ? (this.iconIndex = 0)\n        : this.iconIndex++;\n    }\n  }\n};\n</script>\n<style scoped>\n</style>\n"]}]}