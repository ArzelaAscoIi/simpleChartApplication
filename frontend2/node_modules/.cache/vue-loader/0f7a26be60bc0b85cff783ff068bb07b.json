{"remainingRequest":"/home/kristof/Development/simpleChartApplication/frontend2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kristof/Development/simpleChartApplication/frontend2/src/components/chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kristof/Development/simpleChartApplication/frontend2/src/components/chat.vue","mtime":1608634863610},{"path":"/home/kristof/Development/simpleChartApplication/frontend2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kristof/Development/simpleChartApplication/frontend2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/kristof/Development/simpleChartApplication/frontend2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/kristof/Development/simpleChartApplication/frontend2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogeyB1c2VybmFtZTogU3RyaW5nIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIHZhbHVlOiAicmVjZW50IiwKICAgIHNob3c6IGZhbHNlLAogICAgbWVzc2FnZTogIkhleSEiLAogICAgbWVzc2FnZXM6IFtdLAogICAgbWFya2VyOiB0cnVlLAogICAgaWNvbkluZGV4OiAwLAogICAgdGltZXI6IG51bGwsCiAgICBpY29uczogWwogICAgICAibWRpLWVtb3RpY29uIiwKICAgICAgIm1kaS1lbW90aWNvbi1jb29sIiwKICAgICAgIm1kaS1lbW90aWNvbi1kZWFkIiwKICAgICAgIm1kaS1lbW90aWNvbi1leGNpdGVkIiwKICAgICAgIm1kaS1lbW90aWNvbi1oYXBweSIsCiAgICAgICJtZGktZW1vdGljb24tbmV1dHJhbCIsCiAgICAgICJtZGktZW1vdGljb24tc2FkIiwKICAgICAgIm1kaS1lbW90aWNvbi10b25ndWUiCiAgICBdCiAgfSksCgogIGNvbXB1dGVkOiB7CiAgICBpY29uKCkgewogICAgICByZXR1cm4gdGhpcy5pY29uc1t0aGlzLmljb25JbmRleF07CiAgICB9LAogICAgb3JkZXJlZE1lc3NhZ2VzKCkgewogICAgICBsZXQgdG1wTWVzc2FnZXMgPSBPYmplY3QuYXNzaWduKFtdLCB0aGlzLm1lc3NhZ2VzKTsKICAgICAgaWYgKHRtcE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgICByZXR1cm4gdG1wTWVzc2FnZXMuc29ydCgoYSwgYikgPT4gKGEudGltZXN0YW1wID4gYi50aW1lc3RhbXAgPyAxIDogLTEpKTsKICAgIH0KICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBhd2FpdCB0aGlzLmluaXQoKTsKICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiBjb25zb2xlLmxvZygiYXNkZiIpLCAxMDAwKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBpbml0KCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMubWVzc2FnZXMgPSAoCiAgICAgICAgICBhd2FpdCBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCIsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICApLmRhdGE7CiAgICAgICAgdGhpcy4kdnVldGlmeS5nb1RvKGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KTsKCiAgICAgICAgY29uc29sZS5sb2codGhpcy5tZXNzYWdlcyk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0KICAgIH0sCiAgICB0b2dnbGVNYXJrZXIoKSB7CiAgICAgIHRoaXMubWFya2VyID0gIXRoaXMubWFya2VyOwogICAgfSwKICAgIGFzeW5jIHNlbmRNZXNzYWdlKCkgewogICAgICB0aGlzLnJlc2V0SWNvbigpOwogICAgICBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICJodHRwOi8vbG9jYWxob3N0OjMwMDAiLAogICAgICAgIHsKICAgICAgICAgIHVzZXJuYW1lOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcm5hbWUiKSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICApOwogICAgICB0aGlzLmluaXQoKTsKICAgICAgdGhpcy5jbGVhck1lc3NhZ2UoKTsKICAgIH0sCiAgICBjbGVhck1lc3NhZ2UoKSB7CiAgICAgIHRoaXMubWVzc2FnZSA9ICIiOwogICAgfSwKICAgIHJlc2V0SWNvbigpIHsKICAgICAgdGhpcy5pY29uSW5kZXggPSAwOwogICAgfSwKICAgIGNoYW5nZUljb24oKSB7CiAgICAgIHRoaXMuaWNvbkluZGV4ID09PSB0aGlzLmljb25zLmxlbmd0aCAtIDEKICAgICAgICA/ICh0aGlzLmljb25JbmRleCA9IDApCiAgICAgICAgOiB0aGlzLmljb25JbmRleCsrOwogICAgfQogIH0sCiAgZGVzdHJveWVkKCkgewogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICB9Cn07Cg=="},{"version":3,"sources":["chat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chat.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <v-content>\n      <v-row class=\"mb-3\">\n        <v-spacer></v-spacer>\n        <v-card width=\"600\">\n          <div v-for=\"message of orderedMessages\" v-bind:key=\"message.timestamp\">\n            <v-row>\n              <v-spacer v-if=\"username === message.username\"></v-spacer>\n              <v-card class=\"my-3 pa-1 mx-7\" outlined>\n                <p class=\"caption\" v-if=\"username === message.username\">You</p>\n                <p class=\"caption\" v-else>{{message.username}}</p>\n                {{message.message}}\n              </v-card>\n            </v-row>\n          </div>\n        </v-card>\n        <v-spacer></v-spacer>\n      </v-row>\n    </v-content>\n    <v-bottom-navigation v-model=\"value\" fixed app>\n      <v-text-field\n        v-model=\"message\"\n        :append-outer-icon=\"'mdi-send'\"\n        :prepend-icon=\"icon\"\n        filled\n        clear-icon=\"mdi-close-circle\"\n        clearable\n        label=\"Message\"\n        type=\"text\"\n        @click:append=\"toggleMarker\"\n        @click:append-outer=\"sendMessage\"\n        @click:prepend=\"changeIcon\"\n        @click:clear=\"clearMessage\"\n        @keyup.enter.native=\"sendMessage\"\n      ></v-text-field>\n    </v-bottom-navigation>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  props: { username: String },\n  data: () => ({\n    value: \"recent\",\n    show: false,\n    message: \"Hey!\",\n    messages: [],\n    marker: true,\n    iconIndex: 0,\n    timer: null,\n    icons: [\n      \"mdi-emoticon\",\n      \"mdi-emoticon-cool\",\n      \"mdi-emoticon-dead\",\n      \"mdi-emoticon-excited\",\n      \"mdi-emoticon-happy\",\n      \"mdi-emoticon-neutral\",\n      \"mdi-emoticon-sad\",\n      \"mdi-emoticon-tongue\"\n    ]\n  }),\n\n  computed: {\n    icon() {\n      return this.icons[this.iconIndex];\n    },\n    orderedMessages() {\n      let tmpMessages = Object.assign([], this.messages);\n      if (tmpMessages.length === 0) {\n        return [];\n      }\n      return tmpMessages.sort((a, b) => (a.timestamp > b.timestamp ? 1 : -1));\n    }\n  },\n  async mounted() {\n    await this.init();\n    this.timer = setInterval(() => console.log(\"asdf\"), 1000);\n  },\n\n  methods: {\n    async init() {\n      try {\n        this.messages = (\n          await axios.get(\"http://localhost:3000\", {\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          })\n        ).data;\n        this.$vuetify.goTo(document.body.scrollHeight);\n\n        console.log(this.messages);\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    toggleMarker() {\n      this.marker = !this.marker;\n    },\n    async sendMessage() {\n      this.resetIcon();\n      await axios.post(\n        \"http://localhost:3000\",\n        {\n          username: localStorage.getItem(\"username\"),\n          message: this.message\n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        }\n      );\n      this.init();\n      this.clearMessage();\n    },\n    clearMessage() {\n      this.message = \"\";\n    },\n    resetIcon() {\n      this.iconIndex = 0;\n    },\n    changeIcon() {\n      this.iconIndex === this.icons.length - 1\n        ? (this.iconIndex = 0)\n        : this.iconIndex++;\n    }\n  },\n  destroyed() {\n    clearInterval(this.timer);\n  }\n};\n</script>\n<style scoped>\n</style>\n"]}]}